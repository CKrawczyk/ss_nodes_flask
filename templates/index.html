<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <link type="text/css" rel="stylesheet" href="./static/css/bootstrap-select.min.css">
    <link type="text/css" rel="stylesheet" href="./static/css/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="./static/css/style.css">
    <link id="css" type="text/css" rel="stylesheet" href="./static/css/light_style.css"/>
    <script src="./static/js/jquery-1.11.1.min.js"></script>
    <script src="./static/js/bootstrap.min.js"></script>
    <script src="./static/js/bootstrap-select.js"></script>
  </head>
  <body>
    <header>
      <div class="container" id="header">
        <div class="btn-toolbar pull-right" role="toolbar">
          <div class="btn-group btn-group-xs" roll="group">
            <button type="button" class="btn btn-primary" id="help">Help</button>
          </div>
          <div class="btn-group btn-group-xs" roll="group" data-toggle="buttons" id="color_buttons">
            <label class="btn btn-primary" id="dark_lab">
              <input type="radio" name="color_tab" id="dark" autocomplete="off" value="dark"> Dark
            </label>
            <label class="btn btn-primary active" id="light_lab">
              <input type="radio" name="color_tab" id="light" autocomplete="off" value="light" checked> Light
            </label>
          </div>
        </div>
      </div>
    </header>
    
    <div class="container" id="body_container">
      <div class="row">
        <div class="col-md-7 col-sm-12">
          <h1>Snapshot Serengeti</h1>
        </div>
        <div class="col-md-5 col-sm-12" id="search_button_cell">
          <div class="input-group" id="search_buttons">
            <input type="text" class="form-control" id="search_input">
            <span class="input-group-btn">
              <button class="btn btn-primary" type="button" id="search">Search</button>
              <button class="btn btn-primary" type="button" id="random_search">Random</button>
            </span>
          </div>
        </div>
        <div class="col-md-5 col-sm-12" id="upload_dd_cell" style="display: none;">
          <div class="input-group" id="dd_buttons">
            <select class="selectpicker" id="upload_search" data-width="100%">
            </select>
            <input type="file" id="file_upload" style="display:none;">
            <div class="input-group-btn">
              <button class="btn btn-primary" type="button" id="dd_previous">Previous</button>
              <button class="btn btn-primary" type="button" id="dd_next">Next</button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="row" id="nav_row">
        <div class="col-md-9 col-sm-12">
          <div class="btn-group btn-group-sm pull-right-md" data-toggle="buttons" id="zoo_buttons">
            <label class="btn btn-primary disabled"  id="upload_lab">
              <input type="radio" name="ss_tab" autocomplete="off"  id="upload" value="0">Upload
            </label>
            <label class="btn btn-primary active"  id="ss_1_lab">
              <input type="radio" name="ss_tab" autocomplete="off"  id="ss_1" value="1" checked>S 1
            </label>
            <label class="btn btn-primary" id="ss_2_lab">
              <input type="radio" name="ss_tab" autocomplete="off"  id="ss_2" value="2">S 2
            </label>
            <label class="btn btn-primary" id="ss_3_lab">
              <input type="radio" name="ss_tab" autocomplete="off"  id="ss_3" value="3">S 3
            </label>
            <label class="btn btn-primary" id="ss_4_lab">
              <input type="radio" name="ss_tab" autocomplete="off"  id="ss_4" value="4">S 4
            </label>
            <label class="btn btn-primary" id="ss_5_lab">
              <input type="radio" name="ss_tab" autocomplete="off"  id="ss_5" value="5">S 5
            </label>
            <label class="btn btn-primary" id="ss_6_lab">
              <input type="radio" name="ss_tab" autocomplete="off"  id="ss_6" value="6">S 6
            </label>
            <label class="btn btn-primary" id="ss_7_lab">
              <input type="radio" name="ss_tab" autocomplete="off"  id="ss_7" value="7">S 7
            </label>
            <label class="btn btn-primary" id="ss_8_lab">
              <input type="radio" name="ss_tab" autocomplete="off"  id="ss_8" value="8">S 8
            </label>
          </div>
        </div>
        <!--
        <div class="col-md-3 col-sm-12">
          <div class="btn-group btn-group-sm pull-right" data-toggle="buttons">
            <label class="btn btn-primary active" id="weight_raw_lab">
              <input type="radio" name="weight_tab" autocomplete="off"  id="weight_raw" checked>Raw Votes
            </label>
            <label class="btn btn-primary disabled" id="weight_weighted_lab">
              <input type="radio" name="weight_tab" autocomplete="off"  id="weight_weighted" disabled>Weighted Votes
            </label>
          </div>
        </div>
        -->
      </div>
        
      <div class="row" id="image-row">
        <div class="col-md-8 col-md-offset-2 col-xs-12" id="image">
          <div id="carousel-image" class="carousel slide carousel-fade" data-ride="carousel" data-pause="false">
            <!-- Indicators -->
            <ol class="carousel-indicators">
              <li data-target="#carousel-image" data-slide-to="0" class="active"></li>
              <li data-target="#carousel-image" data-slide-to="1"></li>
              <li data-target="#carousel-image" data-slide-to="2"></li>
            </ol>

            <div class="carousel-inner" role="listbox" style="z-index:9; min-height:20px">
              <!-- Controls -->
              <a class="left carousel-control" href="#carousel-image" role="button" data-slide="prev" style="z-index:14">
                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="right carousel-control" href="#carousel-image" role="button" data-slide="next" style="z-index:14">
                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
              <div id="carouselButtons">
                <button id="playButton" type="button" class="btn btn-default btn-xs">
                  <span class="glyphicon glyphicon-play"></span>/<span class="glyphicon glyphicon-pause"></span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div id="tree">
            <div id="body"></div>
          </div>
        </div>
      </div>
      
      <div class="row" id="controls">
        
        <div class="col-lg-2 col-lg-offset-2 col-sm-3">
          <div class="row">
            <div class="col-md-12">
              <label for="slider_charge" class="slider_label">Charge: <span id="slider_charge_value">...</span></label>
            </div>
            <div class="col-md-12">
              <input type="range" min="1" max="5" value="2.5" step="0.01" id="slider_charge" />
            </div>
          </div>
        </div>
        
        <div class="col-lg-2 col-sm-3">
          <div class="row">
            <div class="col-md-12">
              <label for="slider_strength" class="slider_label">Link Strength: <span id="slider_strength_value">...</span></label>
            </div>
            <div class="col-md-12">
              <input type="range" min="0" max="1" value="1" step="0.01" id="slider_strength" />
            </div>
          </div>
        </div>
        
        <div class="col-lg-2 col-sm-3">
          <div class="row">
            <div class="col-md-12">
              <label for="slider_friction" class="slider_label">Friction: <span id="slider_friction_value">...</span></label>
            </div>
            <div class="col-md-12">
              <input type="range" min="0" max="1" value="0.2" step="0.01" id="slider_friction" />
            </div>
          </div>
        </div>
        
        <div class="col-lg-2 col-sm-3" id="reset">
          <button type="button" id="reset_button" class="btn btn-primary">Reset</button>
        </div>        
      </div>
      
      <footer>
        <aside class="pull-right">Feb 23, 2015</aside>
        <a class="pull-left" href="http://www.zooniverse.org" rel="author">Zooniverse</a>
      </footer>

      <div id="myModal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">×</button>
              <h3 class="modal-title" id="meta-title">Heading</h3>
            </div>
            <div class="modal-body" id="meta-body">
            </div>
            <div class="modal-footer">
              <button class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <div id="HelpModal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">×</button>
              <h3 class="modal-title">Help</h3>
            </div>
            <div class="modal-body">
              <p>This web app visualizes the results of <a href="http://www.snapshotserengeti.org/">Snapshot Serengeti</a> as a node tree. Each tree shows the full vote path for one image.</p>
              <p>This site is currently a work in progress, please send any commetns/suggestions to <a href="mailto:coleman.krawczyk@port.ac.uk">coleman.krawczyk@port.ac.uk</a>. <b>The current page shows FAKE data and is intended to show off the various featurs of the app.</b></p>
              <h3>Featurs:</h3>
              <ul>
                <li>Each node represents the answer to a qustion asked to the useres of Snapshot Serengeti</li>
                <li>The size of each node/link is proportianal to the sqrt(number of votes)</li>
                <li>The maximal vote path is highlighted [Note: I am not sure how useful this is for Snapshot Serengeti]</li>
              </ul>
              
              <h3>What you can do:</h3>
              <ul>
                <li>Mouse over each node to see a description of the node and the number of votes for it</li>
                <li>Mouse over each link to see the number of votes along that link</li>
                <li>Click and drage the nodes to move them around</li>
                <ul>
                  <li>When the nodes are moving they are allowed to pass thorugh each other, but after they settle down collision detection is turned on so they don't overlap</li>
                  <li>The nodes with the most votes attempt to move towards the left</li>
                </ul>
                <li>Click on the image to bring up more information about the image</li>
                <li>Click on the play/pause button to cycle through multiple images (when available)</li>
                <li>Click on any other node to collapse/expand the links leading from it</li>
                <li>The sliders at the bottome can be used to adjsut how the nodes interact with each other</li>
                <ul>
                  <li>Charge: how much the nodes repel each other (also proportional to vote count)</li>
                  <li>Link Strength: how "stiff" the links between the nodes are</li>
                  <li>Friction: how damped the node movement is (0=frictionless, 1=no movement)</li>
                  <li>Reset button: redraw the tree using default values</li>
                </ul>
                <li>Use the "Dark/Light" buttons to toggle between color schemes</li>
              </ul>

              <h3>What still needs to be done</h3>
              <ul>
                <li>The node images for "Standing", "Resting", "Moving", "Eating", "Interacting", "Young present", and "Fire" are currently placeholders. If you have any ideas for good images let me know.</li>
                <li>The images used for the nodes can be found <a href="http://icg.port.ac.uk/~krawcyzc/ss_nodes_flask/static/images/workflow_ss_full.png">here</a>. The animals are all taken from the Snapshot Serengeti example images.  If you think any of them should change let me know.</li>
                <li>The app needs to be hooked up to the Snapshot Serengeti mongo database and the server side querying code needs to be written.</li>
                <li>What would be the most useful quantity to search on aside from the <code>zooniverse_id?</code></li>
                <li>Once the server side code is in place the <code>upload</code> button will be activated to allow users to upload a <code>csv</code> with search value (e.g. <code>zooniverse_id</code>) to look through via a dropdown list.</li>
              </ul>
            </div>
            <div class="modal-footer">
              <button class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
      
      <script type=text/javascript>
        //$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
      </script>
      <script src="./static/js/d3.min.js"></script>
      <script src="./static/js/ss.js"></script>
  </body>
</html>
